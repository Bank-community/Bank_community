<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#001540">
  <title>Royal Member Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    tailwind.config = { theme: { extend: { colors: { royal: { dark: '#001540', blue: '#002366', gold: '#D4AF37' } } } } }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    body { font-family: 'Poppins', sans-serif; background-color: #f4f6f9; color: #1a1a1a; }
    .glass-card { background: white; border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    .gold-ring { border: 3px solid #D4AF37; }
    .loader-container { position: fixed; inset: 0; background: #f4f6f9; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 50; transition: opacity 0.5s; }
    .loader-container.fade-out { opacity: 0; pointer-events: none; }
    .loader { border: 4px solid #ddd; border-top: 4px solid #D4AF37; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); align-items: center; justify-content: center; z-index: 60; }
    .modal.show { display: flex; }
  </style>
</head>
<body class="min-h-screen pb-10">

  <!-- LOADER -->
  <div id="loader-container" class="loader-container">
      <div class="loader"></div>
      <span class="mt-4 text-royal-blue font-bold tracking-widest">LOADING PROFILE...</span>
  </div>

  <!-- ERROR MSG -->
  <div id="error-message" class="hidden fixed top-10 left-1/2 transform -translate-x-1/2 bg-white p-4 rounded-xl shadow-xl border border-red-200 z-50 text-center">
      <p class="text-red-600 font-bold">Error loading data.</p>
  </div>

  <!-- CONTENT -->
  <div id="profile-content" class="hidden w-full">
    <!-- Header -->
    <div class="bg-royal-blue text-white pt-8 pb-16 px-6 rounded-b-[2.5rem] shadow-lg relative overflow-hidden">
        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
        <div class="max-w-5xl mx-auto flex flex-col sm:flex-row items-center gap-6 relative z-10">
            <div class="relative">
                <img id="profile-pic" src="" class="w-28 h-28 rounded-full object-cover gold-ring p-1 bg-white">
                <div class="absolute bottom-0 right-0 bg-yellow-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full border border-white">VERIFIED</div>
            </div>
            <div class="text-center sm:text-left">
                <h1 id="profile-name" class="text-3xl font-bold">--</h1>
                <p id="membership-id" class="text-indigo-200 text-sm mt-1">--</p>
                <p class="text-xs text-indigo-300 mt-2 bg-white/10 inline-block px-3 py-1 rounded-full"><i class="fas fa-check-circle"></i> Active Member</p>
            </div>
        </div>
    </div>

    <!-- Main Grid -->
    <main class="max-w-6xl mx-auto p-4 -mt-10 relative z-20 grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <!-- Left: Stats -->
        <div class="lg:col-span-1 space-y-4">
            <div class="glass-card p-5">
                <h3 class="text-royal-blue font-bold border-b pb-2 mb-3"><i class="fas fa-chart-line text-royal-gold"></i> Financial Health</h3>
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm text-gray-500">Score</span>
                    <span id="performance-score" class="text-xl font-bold text-royal-blue">--</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-500">Eligibility</span>
                    <span id="loan-eligibility" class="text-sm font-bold text-green-600">--</span>
                </div>
            </div>

            <div class="glass-card p-5">
                <h3 class="text-royal-blue font-bold border-b pb-2 mb-3"><i class="fas fa-file-alt text-royal-gold"></i> Documents</h3>
                <div class="grid grid-cols-3 gap-2 text-center">
                    <div><img id="doc-profile-pic" class="h-12 w-full object-cover rounded bg-gray-100 mb-1"><p class="text-[10px]">Photo</p></div>
                    <div><img id="doc-document" class="h-12 w-full object-cover rounded bg-gray-100 mb-1"><p class="text-[10px]">KYC</p></div>
                    <div><img id="doc-signature" class="h-12 w-full object-contain rounded bg-gray-100 mb-1"><p class="text-[10px]">Sign</p></div>
                </div>
            </div>
            
            <div class="glass-card p-5">
                <h3 class="text-royal-blue font-bold border-b pb-2 mb-3"><i class="fas fa-history text-royal-gold"></i> Loan History</h3>
                <div id="loan-history-container" class="space-y-2 max-h-40 overflow-y-auto"></div>
            </div>
        </div>

        <!-- Right: Details -->
        <div class="lg:col-span-2 glass-card p-6">
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Info -->
                <div class="space-y-3 text-sm">
                    <h3 class="font-bold text-royal-blue mb-2"><i class="fas fa-user text-royal-gold"></i> Personal Info</h3>
                    <div class="flex justify-between border-b pb-1"><span class="text-gray-500">Mobile</span><span id="mobile-number" class="font-medium">--</span></div>
                    <div class="flex justify-between border-b pb-1"><span class="text-gray-500">DOB</span><span id="dob" class="font-medium">--</span></div>
                    <div class="flex justify-between border-b pb-1"><span class="text-gray-500">Aadhaar</span><span id="aadhaar" class="font-medium">--</span></div>
                    <div class="flex justify-between border-b pb-1"><span class="text-gray-500">Address</span><span id="address" class="font-medium text-right w-1/2 truncate">--</span></div>
                </div>

                <!-- Wallet -->
                <div>
                    <h3 class="font-bold text-royal-blue mb-4"><i class="fas fa-wallet text-royal-gold"></i> Wealth Overview</h3>
                    <div class="flex justify-between text-sm mb-2"><span class="text-gray-500">Total SIP</span><span id="total-sip" class="font-bold text-royal-blue">₹0</span></div>
                    
                    <div class="mt-4 bg-gradient-to-br from-royal-dark to-royal-blue p-5 rounded-xl text-white text-center shadow-lg relative overflow-hidden">
                        <p class="text-xs uppercase tracking-wider opacity-70">Withdrawable Balance</p>
                        <p id="extra-balance" class="text-3xl font-bold text-royal-gold my-2">₹0</p>
                        <button id="withdraw-btn" class="bg-royal-gold text-royal-dark text-xs font-bold py-2 px-4 rounded shadow hover:bg-yellow-500 w-full">REQUEST WITHDRAWAL</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
  </div>

  <!-- WITHDRAWAL MODAL -->
  <div id="withdrawalModal" class="modal">
      <div class="bg-white rounded-xl p-6 w-80 text-center shadow-2xl">
          <h3 class="text-lg font-bold text-royal-blue mb-4">Withdraw Funds</h3>
          <p class="text-sm text-gray-500 mb-2">Available: <span id="modal-available-balance" class="font-bold text-green-600"></span></p>
          <input type="number" id="withdrawal-amount" placeholder="Enter Amount" class="w-full border p-2 rounded mb-4 text-center font-bold text-lg">
          <button id="submit-withdrawal" class="bg-royal-blue text-white w-full py-2 rounded font-bold">Confirm Request</button>
          <button onclick="document.getElementById('withdrawalModal').classList.remove('show')" class="mt-3 text-sm text-gray-400">Cancel</button>
      </div>
  </div>

  <!-- LINK TO MASTER LOGIC -->
  <script type="module" src="view_logic.js"></script>
</body>
</html>


